var free_class_room_data =
    { "free_class_rooms": { "1": { "1": [3, 8, 9, 10, 11, 13, 16, 17, 19, 20, 21, 22, 23], "2": [3, 8, 9, 10, 13, 16, 17, 19, 20, 22, 23], "3": [2, 3, 8, 9, 10, 11, 13, 20, 22, 23], "4": [], "5": [1, 2, 3, 4, 8, 10, 11, 12, 13, 20, 22, 23], "6": [1, 2, 3, 8, 10, 11, 12, 13, 16, 17, 20, 21, 22, 23] }, "2": { "1": [3, 8, 9, 10, 13, 16, 20, 21, 22, 23], "2": [8, 16, 17, 20, 22, 23], "3": [2, 8, 19, 20, 22, 23], "4": [], "5": [2, 3, 8, 16, 19, 20, 21, 22, 23], "6": [1, 2, 3, 8, 9, 10, 11, 12, 13, 16, 20, 21, 22, 23] }, "3": { "1": [3, 4, 8, 9, 11, 20, 21, 22, 23], "2": [8, 9, 10, 11, 16, 20, 21, 22, 23], "3": [8, 9, 16, 19, 21, 22, 23], "4": [], "5": [3, 9, 12, 16, 20, 21, 22, 23], "6": [1, 2, 3, 8, 9, 10, 12, 13, 17, 19, 20, 21, 22, 23] }, "4": { "1": [2, 8, 9, 10, 12, 16, 17, 20, 21, 22, 23], "2": [8, 16, 20, 21, 22, 23], "3": [2, 8, 16, 21, 22, 23], "4": [], "5": [2, 3, 9, 16, 20, 21, 23], "6": [1, 2, 3, 8, 9, 10, 13, 17, 19, 20, 21, 22, 23] }, "5": { "1": [2, 8, 11, 16, 20, 21, 22, 23], "2": [2, 9, 10, 12, 20, 21, 23], "3": [19, 20, 21, 22, 23], "4": [], "5": [8, 11, 20, 21, 22, 23], "6": [1, 3, 8, 9, 11, 17, 20, 21, 22, 23] }, "6": { "1": [2, 3, 8, 10, 11, 12, 13, 16, 17, 19, 20, 21, 22, 23], "2": [2, 3, 8, 10, 11, 12, 13, 16, 17, 20, 21, 22, 23], "3": [1, 2, 3, 8, 11, 12, 13, 16, 20, 21, 22, 23], "4": [], "5": [1, 2, 3, 8, 9, 10, 11, 12, 13, 16, 19, 20, 21, 22, 23], "6": [1, 2, 3, 8, 9, 10, 11, 12, 13, 16, 17, 19, 20, 21, 22, 23] } }, "class_rooms": [{ "id": 1, "name": "Amphi 5", "extid": "", "capacity": 1000, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 2, "name": "Grande Salle 11", "extid": "", "capacity": 120, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 3, "name": "Grande Salle 12", "extid": "", "capacity": 120, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 4, "name": "IT1", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 5, "term_index": 1 }, { "day_index": 6, "term_index": 1 }, { "day_index": 1, "term_index": 2 }, { "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }, { "day_index": 6, "term_index": 5 }, { "day_index": 1, "term_index": 6 }, { "day_index": 2, "term_index": 6 }, { "day_index": 4, "term_index": 6 }, { "day_index": 5, "term_index": 6 }, { "day_index": 6, "term_index": 6 }] } }, { "id": 5, "name": "IT2", "extid": "", "capacity": 40, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 3, "term_index": 1 }, { "day_index": 4, "term_index": 1 }, { "day_index": 1, "term_index": 2 }, { "day_index": 2, "term_index": 2 }, { "day_index": 3, "term_index": 2 }, { "day_index": 5, "term_index": 2 }, { "day_index": 2, "term_index": 3 }, { "day_index": 4, "term_index": 3 }, { "day_index": 5, "term_index": 3 }, { "day_index": 2, "term_index": 5 }, { "day_index": 3, "term_index": 5 }, { "day_index": 2, "term_index": 6 }] } }, { "id": 6, "name": "IT3", "extid": "", "capacity": 40, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 2, "term_index": 2 }, { "day_index": 3, "term_index": 2 }, { "day_index": 4, "term_index": 2 }, { "day_index": 5, "term_index": 2 }, { "day_index": 2, "term_index": 3 }, { "day_index": 4, "term_index": 3 }, { "day_index": 2, "term_index": 5 }] } }, { "id": 7, "name": "IT4", "extid": "", "capacity": 80, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 2, "term_index": 1 }, { "day_index": 3, "term_index": 1 }, { "day_index": 4, "term_index": 1 }, { "day_index": 5, "term_index": 1 }, { "day_index": 6, "term_index": 1 }, { "day_index": 3, "term_index": 2 }, { "day_index": 4, "term_index": 2 }, { "day_index": 2, "term_index": 3 }, { "day_index": 3, "term_index": 3 }, { "day_index": 4, "term_index": 3 }, { "day_index": 2, "term_index": 5 }, { "day_index": 4, "term_index": 5 }, { "day_index": 3, "term_index": 6 }] } }, { "id": 8, "name": "Salle 36", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 9, "name": "Salle 39", "extid": "", "capacity": 80, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 10, "name": "Salle 40", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 11, "name": "Salle 42", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 12, "name": "Salle 44", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 13, "name": "Salle 45", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 14, "name": "Salle Elearning", "extid": "", "capacity": 40, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 6, "term_index": 1 }, { "day_index": 6, "term_index": 2 }, { "day_index": 6, "term_index": 3 }] } }, { "id": 15, "name": "Salle TP 1", "extid": "", "capacity": 35, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 4, "term_index": 1 }] } }, { "id": 16, "name": "Salle TP 2", "extid": "", "capacity": 35, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 17, "name": "Salle TP 3", "extid": "", "capacity": 35, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 18, "name": "Salle TP 3 Assistant", "extid": "", "capacity": 35, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 1 }, { "day_index": 2, "term_index": 1 }, { "day_index": 3, "term_index": 1 }, { "day_index": 4, "term_index": 1 }, { "day_index": 5, "term_index": 1 }, { "day_index": 6, "term_index": 1 }, { "day_index": 1, "term_index": 2 }, { "day_index": 2, "term_index": 2 }, { "day_index": 3, "term_index": 2 }, { "day_index": 4, "term_index": 2 }, { "day_index": 5, "term_index": 2 }, { "day_index": 6, "term_index": 2 }, { "day_index": 1, "term_index": 3 }, { "day_index": 2, "term_index": 3 }, { "day_index": 3, "term_index": 3 }, { "day_index": 4, "term_index": 3 }, { "day_index": 5, "term_index": 3 }, { "day_index": 6, "term_index": 3 }, { "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }, { "day_index": 1, "term_index": 5 }, { "day_index": 2, "term_index": 5 }, { "day_index": 3, "term_index": 5 }, { "day_index": 4, "term_index": 5 }, { "day_index": 5, "term_index": 5 }, { "day_index": 6, "term_index": 5 }, { "day_index": 1, "term_index": 6 }, { "day_index": 2, "term_index": 6 }, { "day_index": 3, "term_index": 6 }, { "day_index": 4, "term_index": 6 }, { "day_index": 5, "term_index": 6 }, { "day_index": 6, "term_index": 6 }] } }, { "id": 19, "name": "Salle TP 7", "extid": "", "capacity": 35, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 20, "name": "Salle-p 41", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 21, "name": "Salle-p 43", "extid": "", "capacity": 40, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 22, "name": "Salle-p 46", "extid": "", "capacity": 30, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 23, "name": "Salle-p 47*", "extid": "", "capacity": 30, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }] } }, { "id": 24, "name": "SalleTP 2 Assistant", "extid": "", "capacity": 35, "spec_slots": { "type": "unallowed", "spec_slots": [{ "day_index": 1, "term_index": 1 }, { "day_index": 2, "term_index": 1 }, { "day_index": 3, "term_index": 1 }, { "day_index": 4, "term_index": 1 }, { "day_index": 5, "term_index": 1 }, { "day_index": 6, "term_index": 1 }, { "day_index": 1, "term_index": 2 }, { "day_index": 2, "term_index": 2 }, { "day_index": 3, "term_index": 2 }, { "day_index": 4, "term_index": 2 }, { "day_index": 5, "term_index": 2 }, { "day_index": 6, "term_index": 2 }, { "day_index": 1, "term_index": 3 }, { "day_index": 2, "term_index": 3 }, { "day_index": 3, "term_index": 3 }, { "day_index": 4, "term_index": 3 }, { "day_index": 5, "term_index": 3 }, { "day_index": 6, "term_index": 3 }, { "day_index": 1, "term_index": 4 }, { "day_index": 2, "term_index": 4 }, { "day_index": 3, "term_index": 4 }, { "day_index": 4, "term_index": 4 }, { "day_index": 5, "term_index": 4 }, { "day_index": 6, "term_index": 4 }, { "day_index": 1, "term_index": 5 }, { "day_index": 2, "term_index": 5 }, { "day_index": 3, "term_index": 5 }, { "day_index": 4, "term_index": 5 }, { "day_index": 5, "term_index": 5 }, { "day_index": 6, "term_index": 5 }, { "day_index": 1, "term_index": 6 }, { "day_index": 2, "term_index": 6 }, { "day_index": 3, "term_index": 6 }, { "day_index": 4, "term_index": 6 }, { "day_index": 5, "term_index": 6 }, { "day_index": 6, "term_index": 6 }] } }, { "id": 25, "name": "SalleTP 7 Assistant", "extid": "", "capacity": 35, "spec_slots": { "type": "allowed", "spec_slots": [{ "day_index": 4, "term_index": 2 }, { "day_index": 5, "term_index": 2 }, { "day_index": 4, "term_index": 3 }] } }], "days": [{ "id": 1 }, { "id": 2 }, { "id": 3 }, { "id": 4 }, { "id": 5 }, { "id": 6 }], "terms": [{ "index": 1, "term": "08:00-09:30" }, { "index": 2, "term": "09:30-11:00" }, { "index": 3, "term": "11:00-12:30" }, { "index": 4, "term": "12:30-13:00" }, { "index": 5, "term": "13:00-14:30" }, { "index": 6, "term": "14:30-16:00" }] }
// START POINT
$(document).ready(function () {
    build_course_table();
});





function build_course_table() {

    let table = $('#schedule');
    let schedule_year = $("#schedule-year")
    let schedule_group = $("#schedule-title")

    schedule_year.append(`Not yet`);
    schedule_group.append(`Free ClassRooms`);

    row_length = free_class_room_data.terms.length + 1;
    column_length = free_class_room_data.days.length + 1;

    for (var row = 0; row < row_length; row++) {
        column_raw = ""
        for (var column = 0; column < column_length; column++) {
            if (row == 0 && column == 0) {
                column_raw += getEmptyHeader()
            } else if (row == 0) {
                column_raw += getCellDay(free_class_room_data.days[column - 1]);
            } else if (column == 0) {
                column_raw += getTerm(free_class_room_data.terms[row - 1]);
            } else {
                column_raw += get_lesson_cell(column, row);
            }
        }
        row_raw = getRow(column_raw, row);
        table.append(row_raw);
    }
}


function getEmptyCell() {
    return `<td></td>`
}

function getEmptyHeader() {
    return `<th></th>`
}

function getCellDay(day_data) {
    return `<th data-index='${day_data.id}'>${get_day_name_by_index(day_data.id)}</th>`
}

function getTerm(term) {
    return `<td data-index='${term.index}'>${term.term}</td>`
}

function getRow(inner_data, row_number) {
    return `<tr>${inner_data}</tr>`
}


var a = [];

function get_lesson_cell(day_index, term_index) {
    var data = ""
    inner_data = `<div class='free-class-rooms'>`;
    inner_data += `<ul>`
    var tp_items = free_class_room_data.free_class_rooms[day_index][term_index].forEach(class_room_id => {

        class_room = get_class_room_by_id(free_class_room_data.class_rooms,class_room_id);

        inner_data += `<li>`
        inner_data += `<a href='#'>`;
        inner_data += `${class_room.name}`;
        inner_data += `</a>`;
        inner_data += `</li>`


    });

    inner_data += `</ul>`
    inner_data += `</div>`;
    data = `<td> ${inner_data} </td>`;

    if (data)
        return data;

    return "<td></td>"
}

function get_class_room_by_id(class_rooms, class_room_id) {
    var class_room = null;
    class_rooms.forEach(class_room_item => {
        if (class_room_item.id == class_room_id) {
            class_room = class_room_item;
        }
    })
    return class_room;
}


function get_realted_item_by_id(list_item, item_id) {
    let match;
    list_item.forEach(item => {
        if (item.id == item_id) {
            match = item
        }
    })
    return match
}


function get_group_data(groups, group_id) {
    let group;
    groups.forEach(group_item => {
        if (group_item.id == group_id) {
            group = group_item
        }
    })
    return group;
}


function get_free_class_room_data(teachers, teacher_id) {
    let teacher;
    teachers.forEach(teacher_item => {
        if (teacher_item.id == teacher_id) {
            teacher = teacher_item
        }
    })
    return teacher;
}


function get_class_room(class_rooms, class_room_id) {
    let class_room;
    class_rooms.forEach(class_room_item => {
        if (class_room_item.id == class_room_id) {
            class_room = class_room_item
        }
    })

    return class_room;
}


function get_day_name_by_index(day_index) {
    switch (day_index) {
        case 1:
            return "Saturday"
        case 2:
            return "Sunday"
        case 3:
            return "Monday"
        case 4:
            return "Tuesday"
        case 5:
            return "Wednesday"
        case 6:
            return "Thursday"
        case 7:
            return "Friday"

        default:
            break;
    }
}


